<template>
  <mp-flex direction="column" align-items="center" gap="1">
    <mp-flex
      as="button"
      justify-content="center"
      align-items="center"
      width="10"
      height="10"
      :background="color.default.background"
      border-radius="full"
      transition="box-shadow 250ms linear"
      outline="none"
      :_hover="{
        background: color.hover.background,
      }"
      :_focus="{
        background: color.focus.background,
        border: color.focus.border,
        boxShadow: color.focus.boxShadow,
      }"
      @click="handleClick"
    >
      <mp-flex
        transition="all 250ms"
        :color="color.default.icon"
        :_hover="{
          color: color.hover.icon,
        }"
      >
        <mp-icon v-if="!variant" :name="icon" color="currentColor" />
        <svg
          v-if="variant === 'accept'"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M22 18.33C22 18.69 21.9199 19.06 21.7496 19.42C21.5794 19.78 21.359 20.12 21.0686 20.44C20.5779 20.98 20.0371 21.37 19.4261 21.62C18.8252 21.87 18.1743 22 17.4732 22C16.4517 22 15.36 21.76 14.2083 21.27C13.0566 20.78 11.9049 20.12 10.7631 19.29C9.61142 18.45 8.51978 17.52 7.47822 16.49C6.44667 15.45 5.51527 14.36 4.68403 13.22C3.86279 12.08 3.2018 10.94 2.72108 9.81C2.24036 8.67 2 7.58 2 6.54C2 5.86 2.12018 5.21 2.36054 4.61C2.6009 4 2.98147 3.44 3.51227 2.94C4.15323 2.31 4.85428 2 5.59539 2C5.87581 2 6.15623 2.06 6.40661 2.18C6.667 2.3 6.89735 2.48 7.07762 2.74L9.4011 6.01C9.58137 6.26 9.71157 6.49 9.8017 6.71C9.89184 6.92 9.94191 7.13 9.94191 7.32C9.94191 7.56 9.87181 7.8 9.7316 8.03C9.6014 8.26 9.41112 8.5 9.17076 8.74L8.40961 9.53C8.29945 9.64 8.24937 9.77 8.24937 9.93C8.24937 10.01 8.25939 10.08 8.27942 10.16C8.30946 10.24 8.33951 10.3 8.35954 10.36C8.53981 10.69 8.85028 11.12 9.29094 11.64C9.74161 12.16 10.2223 12.69 10.7431 13.22C11.2839 13.75 11.8047 14.24 12.3355 14.69C12.8563 15.13 13.2869 15.43 13.6274 15.61C13.6775 15.63 13.7376 15.66 13.8077 15.69C13.8878 15.72 13.968 15.73 14.0581 15.73C14.2283 15.73 14.3585 15.67 14.4687 15.56L15.2298 14.81C15.4802 14.56 15.7206 14.37 15.9509 14.25C16.1813 14.11 16.4116 14.04 16.662 14.04C16.8523 14.04 17.0526 14.08 17.2729 14.17C17.4932 14.26 17.7236 14.39 17.974 14.56L21.2889 16.91C21.5493 17.09 21.7296 17.3 21.8398 17.55C21.9399 17.8 22 18.05 22 18.33Z"
            fill="currentColor"
          />
        </svg>
        <svg
          v-if="variant === 'decline'"
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
        >
          <path
            d="M2.20757 15.5589C1.9924 15.3429 1.81933 15.073 1.70631 14.7553C1.59329 14.4376 1.52227 14.1019 1.50526 13.7363C1.47694 13.119 1.56831 12.5618 1.78542 12.0467C1.99652 11.5375 2.30938 11.0704 2.72999 10.6514C3.34287 10.0409 4.14126 9.53242 5.12513 9.13803C6.10899 8.74365 7.19446 8.45126 8.37552 8.26684C9.56858 8.08244 10.7794 7.98796 12.0199 7.9834C13.2604 7.99082 14.4707 8.0881 15.6507 8.27524C16.8248 8.46837 17.9027 8.75726 18.8665 9.14791C19.8363 9.54455 20.632 10.0549 21.2536 10.6788C21.66 11.0868 21.9764 11.5486 22.1908 12.0522C22.4112 12.5619 22.5176 13.1253 22.4979 13.7426C22.4899 14.5036 22.2546 15.1086 21.81 15.5516C21.6417 15.7192 21.4376 15.8508 21.2157 15.9284C20.9877 16.0121 20.742 16.0417 20.4784 15.9935L17.13 15.4203C16.8724 15.3781 16.6568 15.3179 16.4712 15.2398C16.2916 15.1677 16.1361 15.0716 16.0225 14.9576C15.8791 14.8136 15.7777 14.6277 15.7243 14.4059C15.665 14.1901 15.6357 13.9324 15.6365 13.6447L15.621 12.7158C15.6213 12.584 15.5737 12.4761 15.478 12.3801C15.4302 12.3321 15.3824 12.2961 15.3225 12.2601C15.2567 12.23 15.2028 12.212 15.1549 12.1879C14.8495 12.0977 14.4063 12.0253 13.8311 11.9767C13.2499 11.934 12.6447 11.9034 12.0155 11.8967C11.3742 11.9019 10.7689 11.9192 10.1815 11.9665C9.60608 12.0137 9.1684 12.0911 8.85652 12.1867C8.81453 12.2046 8.76054 12.2225 8.70055 12.2464C8.63455 12.2763 8.58051 12.3182 8.52643 12.3721C8.42428 12.4738 8.38203 12.5876 8.38168 12.7195L8.37328 13.6244C8.37249 13.924 8.34184 14.1817 8.27536 14.3913C8.22084 14.613 8.12448 14.7927 7.97426 14.9423C7.8601 15.056 7.71601 15.1518 7.53003 15.2295C7.34405 15.3071 7.12815 15.3668 6.87633 15.4145L3.4829 15.9859C3.21909 16.0335 2.98542 16.0153 2.7699 15.9311C2.56039 15.841 2.37492 15.7269 2.20757 15.5589Z"
            fill="currentColor"
          />
        </svg>
        <svg
          v-if="variant === 'mute'"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M6.75 6.5C6.75 3.60051 9.1005 1.25 12 1.25C14.8995 1.25 17.25 3.60051 17.25 6.5V12C17.25 14.8995 14.8995 17.25 12 17.25C9.1005 17.25 6.75 14.8995 6.75 12V6.5ZM4.60607 9.25754C5.01612 9.31612 5.30105 9.69602 5.24247 10.1061C4.77487 13.3793 5.79115 15.5049 7.20572 16.8271C8.65597 18.1826 10.587 18.75 11.9839 18.75C13.3813 18.75 15.321 18.1823 16.7796 16.8258C18.202 15.5029 19.2249 13.3775 18.7575 10.1061C18.699 9.69602 18.9839 9.31612 19.3939 9.25754C19.804 9.19896 20.1839 9.48388 20.2425 9.89393C20.7751 13.6225 19.6044 16.2471 17.8011 17.9242C16.2785 19.3402 14.347 20.0426 12.7339 20.21V22C12.7339 22.4142 12.3981 22.75 11.9839 22.75C11.5697 22.75 11.2339 22.4142 11.2339 22V20.21C9.62232 20.0425 7.69724 19.3397 6.18147 17.9229C4.38633 16.2451 3.22514 13.6207 3.75754 9.89393C3.81612 9.48388 4.19602 9.19896 4.60607 9.25754Z"
            fill="currentColor"
          />
        </svg>
        <svg
          v-if="variant === 'unmute'"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M12 1.25C9.10051 1.25 6.75 3.60051 6.75 6.5V12C6.75 13.1789 7.13925 14.2679 7.79526 15.1441L6.67332 16.266C5.55102 14.9295 4.83595 12.9516 5.24247 10.1061C5.30105 9.69602 5.01612 9.31612 4.60607 9.25754C4.19602 9.19896 3.81612 9.48388 3.75754 9.89393C3.28425 13.207 4.14929 15.6493 5.60939 17.3299L1.46967 21.4697C1.17678 21.7626 1.17678 22.2374 1.46967 22.5303C1.76256 22.8232 2.23744 22.8232 2.53033 22.5303L22.5303 2.53033C22.8232 2.23744 22.8232 1.76256 22.5303 1.46967C22.2374 1.17678 21.7626 1.17678 21.4697 1.46967L17.1959 5.74345C16.8292 3.20242 14.6426 1.25 12 1.25Z"
            fill="currentColor"
          />
          <path
            d="M20.2425 9.89393C20.1839 9.48388 19.804 9.19896 19.3939 9.25754C18.9839 9.31612 18.699 9.69602 18.7575 10.1061C19.2249 13.3775 18.202 15.5029 16.7796 16.8258C15.321 18.1823 13.3813 18.75 11.9839 18.75C11.2319 18.75 10.3083 18.5845 9.38286 18.2065C8.99941 18.0498 8.56158 18.2337 8.40493 18.6171C8.24829 19.0006 8.43215 19.4384 8.8156 19.5951C9.63602 19.9302 10.4671 20.1304 11.2339 20.2101V22C11.2339 22.4142 11.5697 22.75 11.9839 22.75C12.3981 22.75 12.7339 22.4142 12.7339 22V20.21C14.347 20.0426 16.2785 19.3402 17.8011 17.9242C19.6044 16.2471 20.7751 13.6225 20.2425 9.89393Z"
            fill="currentColor"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M17.25 11.5C17.25 11.1967 17.0673 10.9232 16.787 10.8071C16.5068 10.691 16.1842 10.7552 15.9697 10.9697L10.9945 15.9449C10.79 16.1493 10.7213 16.4531 10.8178 16.7256C10.9144 16.9982 11.159 17.1909 11.4465 17.2211C11.6286 17.2402 11.8133 17.25 12 17.25C14.8995 17.25 17.25 14.8995 17.25 12V11.5Z"
            fill="currentColor"
          />
        </svg>
      </mp-flex>
    </mp-flex>
    <mp-text v-if="label" :color="isDisabled ? 'gray.400' : 'white'" font-size="xs">{{ label }}</mp-text>
  </mp-flex>
</template>

<script>
import { MpFlex, MpText, MpIcon } from "@mekari/pixel";

export default {
  name: "VoiceButton",
  components: {
    MpFlex,
    MpText,
    MpIcon
  },
  props: {
    variant: {
      type: String,
      default: "", // accept, decline, mute, unmute,
    },
    label: {
      type: String,
      default: "",
    },
    icon: {
      type: String,
      default: "",
    },
    isDisabled: {
      type: Boolean,
      default: false,
    },
  },
  data() {
    return {};
  },
  computed: {
    color() {
      let color = {
        default: {
          icon: "white",
          background: "#3a3f4b",
        },
        hover: {
          icon: "white",
          background: "#4f555b",
        },
        focus: {
          background: "#313642",
          border: "1px solid white",
          boxShadow: "0px 0px 0px 2px #313642",
        },
        active: {
          icon: "white",
          background: "#3a3f4b",
        },
      };

      if (this.isDisabled) {
        return (color = {
          default: {
            icon: "gray.600",
            background: "#3a3f4b",
          },
          hover: {
            icon: "gray.600",
            background: "#3a3f4b",
          },
          focus: {
            background: "#3a3f4b",
            border: "none",
            boxShadow: "none",
          },
          active: {
            icon: "gray.600",
            background: "#3a3f4b",
          },
        });
      }

      if (this.variant === "accept") {
        color = {
          default: {
            icon: "white",
            background: "green.400",
          },
          hover: {
            icon: "white",
            background: "green.500",
          },
          focus: {
            background: "green.400",
            border: "1px solid var(--colors-green-50)",
            boxShadow: "0px 0px 0px 2px var(--colors-green-400)",
          },
          active: {
            icon: "white",
            background: "green.400",
          },
        };
      }

      if (this.variant === "decline") {
        color = {
          default: {
            icon: "white",
            background: "red.400",
          },
          hover: {
            icon: "white",
            background: "red.500",
          },
          focus: {
            background: "red.500",
            border: "1px solid var(--colors-red-50)",
            boxShadow: "0px 0px 0px 2px var(--colors-red-400)",
          },
          active: {
            icon: "white",
            background: "red.400",
          },
        };
      }

      if (this.variant === "mute") {
        color = {
          default: {
            icon: "green.400",
            background: "#3a3f4b",
          },
          hover: {
            icon: "green.400",
            background: "#4f555b",
          },
          focus: {
            border: "1px solid white",
            background: "#313642",
            boxShadow: "0px 0px 0px 2px #313642",
          },
          active: {
            icon: "white",
            background: "#3a3f4b",
          },
        };
      }

      if (this.variant === "unmute") {
        color = {
          default: {
            icon: "red.400",
            background: "#3a3f4b",
          },
          hover: {
            icon: "red.400",
            background: "#4f555b",
          },
          focus: {
            border: "1px solid white",
            background: "#313642",
            boxShadow: "0px 0px 0px 2px #313642",
          },
          active: {
            icon: "white",
            background: "#3a3f4b",
          },
        };
      }

      return color;
    },
  },
  methods: {
    handleClick() {
      if (this.isDisabled) {
        return;
      }
      this.$emit("click");
    },
  },
};
</script>
